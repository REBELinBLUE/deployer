version: "3.1"

services:
  php:
    environment:
      XDEBUG_CONFIG: remote_host=host.docker.internal
    volumes:
      - "./docker/php/xdebug.ini:/usr/local/etc/php/conf.d/98-xdebug.ini"
    links:
      - mailhog

  mailhog:
    image: mailhog/mailhog:latest
    ports:
      - "8001:8025"

  webvm:
    build: docker/dev
    volumes:
      - cache:/home/deploy/.composer
      - webapp:/var/www

  cronvm:
    build: docker/dev
    volumes:
      - cache:/home/deploy/.composer
      - cronapp:/var/www

volumes:
  cache:
  cronapp:
  webapp:
